<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Uppy &rsaquo; tus &rsaquo; Vimeo example</title>
  </head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css" >
  <body>
    <h1>Uppy &rsaquo; tus &rsaquo; Vimeo example</h1>
    <div class="row">
      <div class="six columns">
        <p>
          Vimeo
          <a href="https://medium.com/vimeo-engineering-blog/introducing-the-new-vimeo-upload-api-3e208a2da760">supports</a> tus uploads</li> and Uppy
          <a href="https://uppy.io/docs/tus/">supports</a> tus uploads so we figured it should be possible to upload videos to Vimeo with the next open source file uploader
          for web browsers.
          <br /> 
        </p>

        <label for="vimeoClientId">Your Vimeo Client ID</label>
        <input class="u-full-width" value="a7c30cc8ece39349ea055bf61bd51426fe2c50ef" type="email" placeholder="Your Vimeo Client ID" id="vimeoClientId">
        <p>
          You can get a Client ID <a href="https://developer.vimeo.com/api/start">here</a>.
        </p>

        <iframe src="uppy.html" frameborder="0" width="100%"></iframe>
      </div>
    </div>

    <p>
      <hr />
      With ðŸ’Ÿ by <a href="https://transloadit.com">Transloadit</a>'s <a href="https://twitter.com/goto-bus-stop">@goto-bus-stop</a> &amp; <a href="https://twitter.com/kvz">@kvz</a>. <br />
      Code available on <a href="https://github.com/transloadit/uppy-vimeo-thing/">GitHub</a>
    </p>
    <script defer>
      const clientIdInput = document.querySelector('#vimeoClientId')
      const frame = document.querySelector('iframe')
      clientIdInput.value = localStorage.vimeoClientId
      clientIdInput.addEventListener('blur', (event) => {
        if (event.target.value) {
          localStorage.vimeoClientId = event.target.value
        }
      }, false)
      if (!localStorage.vimeoClientId) {
        localStorage.vimeoClientId = 'a7c30cc8ece39349ea055bf61bd51426fe2c50ef'
      } else {
        clientIdInput.value = localStorage.vimeoClientId
      }

      frame.contentWindow.addEventListener('DOMContentLoaded', fixIframe)
      function fixIframe () {
        if (frame && frame.contentDocument) {
          frame.style.height = `${frame.contentDocument.body.scrollHeight}px`
        }
      }
    </script>
  </body>
</html>
